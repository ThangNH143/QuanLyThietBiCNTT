<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Qu·∫£n l√Ω s·ª≠a ch·ªØa thi·∫øt b·ªã</title>

  <%- include('../partials/header') %>

<div class="container mt-4">
  <h2 class="mb-4">Qu·∫£n l√Ω s·ª≠a ch·ªØa thi·∫øt b·ªã</h2>
  <div id="repairAlertContainer" class="mb-3"></div>

  <!-- B·ªô l·ªçc -->
  <form id="filterRepairForm" class="row g-2 mb-3">
    <div class="col-md-4"><input name="deviceKeyword" class="form-control" placeholder="T√¨m thi·∫øt b·ªã..." /></div>
    <div class="col-md-4"><input name="hardwareKeyword" class="form-control" placeholder="T√¨m ph·∫ßn c·ª©ng..." /></div>
    <div class="col-md-4">
      <select name="status" class="form-select">
        <option value="opened">M·ªõi ti·∫øp nh·∫≠n</option>
        <option value="in-progress">ƒêang s·ª≠a</option>
        <option value="completed">Ho√†n t·∫•t</option>
        <option value="canceled">H·ªßy b·ªè</option>
      </select>
    </div>
    <div class="col-md-12 text-end">
      <button class="btn btn-primary">üîç T√¨m</button>
      <button type="button" id="btnOpenCreateRepairModal" class="btn btn-success ms-2">‚ûï T·∫°o phi·∫øu s·ª≠a</button>
    </div>
  </form>

  <!-- B·∫£ng danh s√°ch -->
  <table class="table table-bordered table-striped align-middle">
    <thead>
      <tr>
        <th>Thi·∫øt b·ªã</th>
        <th>Lo·∫°i</th>
        <th>Ph·∫ßn c·ª©ng</th>
        <th>Khoa ph√≤ng</th>
        <th>Ng∆∞·ªùi g·ª≠i</th>
        <th>Ng√†y h∆∞</th>
        <th>Ng∆∞·ªùi th·ª±c hi·ªán</th>
        <th>Ng√†y s·ª≠a</th>
        <th>Tr·∫°ng th√°i</th>
        <th>Ghi ch√∫</th>
        <th>Thao t√°c</th>
      </tr>
    </thead>
    <tbody id="repairTableBody"></tbody>
  </table>
</div>

<!-- Modal t·∫°o -->
<div class="modal fade" id="repairCreateModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <form id="createRepairForm" class="modal-content">
      <div class="modal-header"><h5 class="modal-title">T·∫°o phi·∫øu s·ª≠a ch·ªØa</h5></div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="createRepairDeviceDropdown" class="form-label">Thi·∫øt b·ªã</label>
          <select id="createRepairDeviceDropdown" class="form-select mb-3" required></select>
        </div>
        <div class="mb-3">
          <label for="createRepairHardwareDropdown" class="form-label">Ph·∫ßn c·ª©ng</label>
          <select id="createRepairHardwareDropdown" class="form-select mb-3" multiple></select>
        </div>
        <div class="mb-3">
          <label for="createRepairSenderText" class="form-label">Ng∆∞·ªùi g·ª≠i Thi·∫øt b·ªã</label>
          <input id="createRepairSenderText" class="form-control mb-3" />
        </div>
        <div class="mb-3">
          <label for="repairBrokenDate" class="form-label">Ng√†y h∆∞ h·ªèng</label>
          <input type="date" id="createRepairBrokenDate" class="form-control mb-3" required />
        </div>
        <div class="mb-3">
          <label for="createRepairReceiverDropdown" class="form-label">Ng∆∞·ªùi nh·∫≠n s·ª≠a ch·ªØa</label>
          <input id="createRepairReceiverDropdown" class="form-control mb-3"/>
        </div>
        <div class="mb-3">
          <label for="createRepairRepairDate" class="form-label">Ng√†y s·ª≠a ch·ªØa</label>
          <input type="date" id="createRepairRepairDate" class="form-control mb-3" />
        </div>
        <div class="mb-3">
          <label for="createRepairStatusDropdown" class="form-label">Tr·∫°ng th√°i</label>
          <select id="createRepairStatusDropdown" class="form-select mb-3" required>
            <option value="opened">M·ªõi ti·∫øp nh·∫≠n</option>
            <option value="in-progress">ƒêang s·ª≠a</option>
            <option value="completed">Ho√†n t·∫•t</option>
            <option value="canceled">H·ªßy b·ªè</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="createRepairNote" class="form-label">Ghi ch√∫</label>
          <textarea id="createRepairNote" class="form-control" rows="3" placeholder="Ghi ch√∫ th√™m (n·∫øu c√≥)"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success">üíæ T·∫°o</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal s·ª≠a -->
<div class="modal fade" id="repairEditModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <form id="editRepairForm" class="modal-content">
      <div class="modal-header"><h5 class="modal-title">S·ª≠a phi·∫øu s·ª≠a ch·ªØa</h5></div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="editRepairId" class="form-label">Thi·∫øt b·ªã</label>
          <input type="hidden" id="editRepairId" />
          <input type="hidden" id="editRepairDeviceId" />
          <input type="text" id="editRepairDeviceInfo" class="form-control mb-3" disabled />
        </div>
        <div class="mb-3">
          <label for="editRepairHardwareDropdown" class="form-label">Ph·∫ßn c·ª©ng</label>
          <select id="editRepairHardwareDropdown" class="form-select mb-3" multiple></select>
        </div>
        <div class="mb-3">
          <label for="editRepairSenderText" class="form-label">Ng∆∞·ªùi g·ª≠i Thi·∫øt b·ªã</label>
          <input id="editRepairSenderText" class="form-control my-3" />
        </div>
        <div class="mb-3">
          <label for="editRepairBrokenDate" class="form-label">Ng√†y h∆∞ h·ªèng</label>
          <input type="date" id="editRepairBrokenDate" class="form-control mb-3" required />
        </div>
        <div class="mb-3">
          <label for="editRepairReceiverDropdown" class="form-label">Ng∆∞·ªùi nh·∫≠n s·ª≠a ch·ªØa</label>
          <select id="editRepairReceiverDropdown" class="form-select my-3"></select>
        </div>
        <div class="mb-3">
          <label for="editRepairRepairDate" class="form-label">Ng√†y s·ª≠a ch·ªØa</label>
          <input type="date" id="editRepairRepairDate" class="form-control mb-3" />
        </div>
        <div class="mb-3">
          <label for="editRepairStatusDropdown" class="form-label">Tr·∫°ng th√°i</label>
          <select id="editRepairStatusDropdown" class="form-select mb-3" required>
            <option value="opened">M·ªõi ti·∫øp nh·∫≠n</option>
            <option value="in-progress">ƒêang s·ª≠a</option>
            <option value="completed">Ho√†n t·∫•t</option>
            <option value="canceled">H·ªßy b·ªè</option>
          </select>
        </div>
        <textarea id="editRepairNote" class="form-control" rows="3" placeholder="Ghi ch√∫ th√™m (n·∫øu c√≥)"></textarea>
      </div>
      <div class="modal-footer">
        <button class="btn btn-warning">üíæ L∆∞u</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
      </div>
    </form>
  </div>
</div>

<script src="/js/repairs.js"></script>
</body>
</html>
